# Engineering Coverage Framework

This matrix maps core engineering concerns to enforcement layers and evidence in this repository.

## Coverage Matrix

| Area | XSD | Schematron | Java Validators | CLI/Doctor | Tests | Fixtures | Docs |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Structure | [`schema/fdml.xsd`](../schema/fdml.xsd) | [`schematron/fdml.sch`](../schematron/fdml.sch) (`basic-rules`, `figure-structure`) | [`src/main/java/org/fdml/cli/FdmlValidator.java`](../src/main/java/org/fdml/cli/FdmlValidator.java) | [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java), [`src/main/java/org/fdml/cli/Doctor.java`](../src/main/java/org/fdml/cli/Doctor.java) | [`src/test/java/org/fdml/cli/FdmlSchemaV12Test.java`](../src/test/java/org/fdml/cli/FdmlSchemaV12Test.java) | [`corpus/valid`](../corpus/valid), [`corpus/invalid`](../corpus/invalid) | [`docs/FDML-SPEC.md`](../docs/FDML-SPEC.md), [`RUNBOOK.md`](../RUNBOOK.md) |
| References | N/A + rationale: cross-node figure/role references are not fully expressible in current XSD design | [`schematron/fdml.sch`](../schematron/fdml.sch) (`sequence-refs`, role reference rules) | [`src/main/java/org/fdml/cli/GeometryValidator.java`](../src/main/java/org/fdml/cli/GeometryValidator.java) | [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) (`validate-sch`, `validate-geo`, `doctor`) | [`src/test/java/org/fdml/cli/GeometryValidatorTest.java`](../src/test/java/org/fdml/cli/GeometryValidatorTest.java) | [`corpus/invalid_v12/mayim-mayim.order-broken.v12.fdml.xml`](../corpus/invalid_v12/mayim-mayim.order-broken.v12.fdml.xml), [`corpus/invalid/example-07-bad-use.fdml.xml`](../corpus/invalid/example-07-bad-use.fdml.xml) | [`docs/GEOMETRY-SPEC.md`](../docs/GEOMETRY-SPEC.md), [`docs/TOPOLOGY-SPEC.md`](../docs/TOPOLOGY-SPEC.md) |
| Semantics | [`schema/fdml.xsd`](../schema/fdml.xsd) (enums/attributes) | [`schematron/fdml.sch`](../schematron/fdml.sch) (business rules) | [`src/main/java/org/fdml/cli/Linter.java`](../src/main/java/org/fdml/cli/Linter.java), [`src/main/java/org/fdml/cli/GeometryValidator.java`](../src/main/java/org/fdml/cli/GeometryValidator.java) | [`src/main/java/org/fdml/cli/Doctor.java`](../src/main/java/org/fdml/cli/Doctor.java) | [`src/test/java/org/fdml/cli/DoctorTimingTest.java`](../src/test/java/org/fdml/cli/DoctorTimingTest.java), [`src/test/java/org/fdml/cli/GeometryValidatorTest.java`](../src/test/java/org/fdml/cli/GeometryValidatorTest.java) | [`corpus/valid_v12`](../corpus/valid_v12), [`corpus/invalid_v12`](../corpus/invalid_v12) | [`docs/FDML-SPEC.md`](../docs/FDML-SPEC.md), [`docs/GEOMETRY-SPEC.md`](../docs/GEOMETRY-SPEC.md) |
| Timing | [`schema/fdml.xsd`](../schema/fdml.xsd) (`step/@beats` typing) | [`schematron/fdml.sch`](../schematron/fdml.sch) (`step/@beats` and meter-adjacent checks) | [`src/main/java/org/fdml/cli/TimingValidator.java`](../src/main/java/org/fdml/cli/TimingValidator.java) | [`src/main/java/org/fdml/cli/Doctor.java`](../src/main/java/org/fdml/cli/Doctor.java), [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) | [`src/test/java/org/fdml/cli/TimingValidatorTest.java`](../src/test/java/org/fdml/cli/TimingValidatorTest.java), [`src/test/java/org/fdml/cli/DoctorTimingTest.java`](../src/test/java/org/fdml/cli/DoctorTimingTest.java) | [`corpus/invalid_timing/example-off-meter.fdml.xml`](../corpus/invalid_timing/example-off-meter.fdml.xml), [`corpus/valid/abdala.fdml.xml`](../corpus/valid/abdala.fdml.xml) | [`docs/TIMING-SPEC.md`](../docs/TIMING-SPEC.md) |
| Topology | [`schema/fdml.xsd`](../schema/fdml.xsd) (formation/geometry structures) | [`schematron/fdml.sch`](../schematron/fdml.sch) (formation compatibility checks) | [`src/main/java/org/fdml/cli/GeometryValidator.java`](../src/main/java/org/fdml/cli/GeometryValidator.java) | [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) (`validate-geo`, `doctor`) | [`src/test/java/org/fdml/cli/GeometryValidatorTest.java`](../src/test/java/org/fdml/cli/GeometryValidatorTest.java) | [`corpus/valid_v12/haire-mamougeh.opposites.v12.fdml.xml`](../corpus/valid_v12/haire-mamougeh.opposites.v12.fdml.xml), [`corpus/invalid_v12/haire-mamougeh.opposites-bad.v12.fdml.xml`](../corpus/invalid_v12/haire-mamougeh.opposites-bad.v12.fdml.xml) | [`docs/TOPOLOGY-SPEC.md`](../docs/TOPOLOGY-SPEC.md) |
| Geometry Primitives | [`schema/fdml.xsd`](../schema/fdml.xsd) (`BodyGeoPrimitiveType`, enum attrs) | [`schematron/fdml.sch`](../schematron/fdml.sch) (primitive-level assertions) | [`src/main/java/org/fdml/cli/GeometryValidator.java`](../src/main/java/org/fdml/cli/GeometryValidator.java) | [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) (`validate-geo`) | [`src/test/java/org/fdml/cli/GeometryValidatorTest.java`](../src/test/java/org/fdml/cli/GeometryValidatorTest.java) | [`corpus/valid_v12/mayim-mayim.framed.v12.fdml.xml`](../corpus/valid_v12/mayim-mayim.framed.v12.fdml.xml), [`corpus/invalid_v12/mayim-mayim.bad-frame.v12.fdml.xml`](../corpus/invalid_v12/mayim-mayim.bad-frame.v12.fdml.xml) | [`docs/GEOMETRY-SPEC.md`](../docs/GEOMETRY-SPEC.md) |
| Stateful Invariants | N/A + rationale: state transitions across primitive streams are not representable in static schema | N/A + rationale: stateful progression/relational evolution exceeds current Schematron scope | [`src/main/java/org/fdml/cli/GeometryValidator.java`](../src/main/java/org/fdml/cli/GeometryValidator.java), [`src/main/java/org/fdml/cli/TimingValidator.java`](../src/main/java/org/fdml/cli/TimingValidator.java) | [`src/main/java/org/fdml/cli/Doctor.java`](../src/main/java/org/fdml/cli/Doctor.java) (`--strict` gate) | [`src/test/java/org/fdml/cli/GeometryValidatorTest.java`](../src/test/java/org/fdml/cli/GeometryValidatorTest.java), [`src/test/java/org/fdml/cli/TimingValidatorTest.java`](../src/test/java/org/fdml/cli/TimingValidatorTest.java) | [`corpus/valid_v12/example-05-contra.progress-order.v12.fdml.xml`](../corpus/valid_v12/example-05-contra.progress-order.v12.fdml.xml), [`corpus/invalid_v12/example-05-contra.progress-order-bad.v12.fdml.xml`](../corpus/invalid_v12/example-05-contra.progress-order-bad.v12.fdml.xml) | [`docs/TOPOLOGY-SPEC.md`](../docs/TOPOLOGY-SPEC.md), [`docs/TIMING-SPEC.md`](../docs/TIMING-SPEC.md) |
| Rendering/Publishing | N/A + rationale: rendering output is not validated by XSD | N/A + rationale: rendering pipeline is outside Schematron validation scope | [`src/main/java/org/fdml/cli/Renderer.java`](../src/main/java/org/fdml/cli/Renderer.java), [`src/main/java/org/fdml/cli/PdfExporter.java`](../src/main/java/org/fdml/cli/PdfExporter.java), [`src/main/java/org/fdml/cli/Indexer.java`](../src/main/java/org/fdml/cli/Indexer.java) | [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) (`render`, `export-pdf`, `index`) | [`src/test/java/org/fdml/cli/RenderSnapshotTest.java`](../src/test/java/org/fdml/cli/RenderSnapshotTest.java), [`src/test/java/org/fdml/cli/IndexJsonTest.java`](../src/test/java/org/fdml/cli/IndexJsonTest.java) | [`corpus/valid/example-01.fdml.xml`](../corpus/valid/example-01.fdml.xml), [`docs/examples/example-01.fdml.html`](../docs/examples/example-01.fdml.html) | [`docs/ARCHITECTURE.md`](../docs/ARCHITECTURE.md), [`docs/USAGE.md`](../docs/USAGE.md) |
| Determinism/Build | N/A + rationale: build reproducibility is outside schema semantics | [`schematron/fdml-compiled.xsl`](../schematron/fdml-compiled.xsl), [`schematron/fdml.sch`](../schematron/fdml.sch) | [`scripts/compile_schematron.sh`](../scripts/compile_schematron.sh) | [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) (stable exit codes), [`src/main/java/org/fdml/cli/MainJson.java`](../src/main/java/org/fdml/cli/MainJson.java) | [`src/test/java/org/fdml/cli/MainHelpTest.java`](../src/test/java/org/fdml/cli/MainHelpTest.java), [`src/test/java/org/fdml/cli/IndexJsonTest.java`](../src/test/java/org/fdml/cli/IndexJsonTest.java) | [`corpus/valid`](../corpus/valid), [`corpus/invalid`](../corpus/invalid) | [`RUNBOOK.md`](../RUNBOOK.md), [`docs/CONTRIBUTING.md`](../docs/CONTRIBUTING.md) |
| Corpus/Evaluation | N/A + rationale: corpus quality metrics are not a schema concern | N/A + rationale: corpus coverage accounting is operational, not a Schematron rule set | [`src/main/java/org/fdml/cli/TimingValidator.java`](../src/main/java/org/fdml/cli/TimingValidator.java), [`src/main/java/org/fdml/cli/GeometryValidator.java`](../src/main/java/org/fdml/cli/GeometryValidator.java) | [`src/main/java/org/fdml/cli/Doctor.java`](../src/main/java/org/fdml/cli/Doctor.java), [`src/main/java/org/fdml/cli/Main.java`](../src/main/java/org/fdml/cli/Main.java) | [`src/test/java/org/fdml/cli/DoctorTimingTest.java`](../src/test/java/org/fdml/cli/DoctorTimingTest.java), [`src/test/java/org/fdml/cli/GeometryValidatorTest.java`](../src/test/java/org/fdml/cli/GeometryValidatorTest.java) | [`corpus/valid`](../corpus/valid), [`corpus/invalid`](../corpus/invalid), [`corpus/valid_v12`](../corpus/valid_v12), [`corpus/invalid_v12`](../corpus/invalid_v12), [`corpus/invalid_timing`](../corpus/invalid_timing) | [`docs/COVERAGE.md`](../docs/COVERAGE.md), [`RUNBOOK.md`](../RUNBOOK.md) |

## How To Use This

1. Pick a row for the quality dimension you are changing (for example, `Timing` or `Topology`).
2. Update at least one enforcement layer in that row (schema/rules/validator/CLI), and add or adjust tests + fixtures.
3. Confirm docs in the same row still match implementation.
4. Run `make coverage` to detect missing matrix cells, then run CI checks (`make ci`, `mvn test`).
