:root{
  --bg:#0b1020; --panel:#0f172a; --ink:#e6edf3; --muted:#a4b1c3; --accent:#22c55e; --accent-ink:#062d16; --border:#1f2937; --ring:0 0 0 3px rgba(34,197,94,.25);
  --shadow:0 2px 10px rgba(2,6,23,.35), 0 1px 0 rgba(255,255,255,.02) inset
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f6f8fa; --panel:#ffffff; --ink:#0f172a; --muted:#475569; --accent:#2563eb; --accent-ink:#0b3a72; --border:#e5e7eb; --shadow:0 2px 12px rgba(2,6,23,.06) }
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font:15.5px/1.6 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
  color:var(--ink); background:var(--bg);
}
.container{max-width:1120px; margin:56px auto; padding:0 24px}
.site-head{position:sticky; top:0; z-index:10; backdrop-filter:saturate(180%) blur(10px); background:color-mix(in hsl, var(--bg) 88%, transparent); border-bottom:1px solid var(--border)}
.site-head .container{display:flex; align-items:center; justify-content:space-between; padding:14px 24px}
.brand{font-weight:800; letter-spacing:.2px; color:var(--ink); text-decoration:none}
.nav a{color:var(--muted); text-decoration:none; margin-left:18px}
.nav a:hover{color:var(--ink)}
.hero{background:linear-gradient(90deg, color-mix(in srgb, var(--accent) 12%, transparent), transparent); border:1px solid var(--border); border-radius:14px; padding:22px 24px; margin:0 0 28px 0; box-shadow:var(--shadow)}
h1,h2,h3{margin:0 0 10px}
h1{font-size:28px; font-weight:800; letter-spacing:.2px}
h2{font-size:20px}
.sub{color:var(--muted); margin:.6rem 0 1.1rem}
.card{background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:18px 20px; box-shadow:var(--shadow)}
.grid{list-style:none; padding:0; margin:12px 0 24px; display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:14px}
.grid a{display:block; color:var(--ink); text-decoration:none; border:1px solid var(--border); border-radius:12px; padding:16px 18px; background:var(--panel); box-shadow:var(--shadow); transition:transform .15s ease, box-shadow .15s ease}
.grid a:hover{transform:translateY(-2px); box-shadow:0 8px 24px rgba(2,6,23,.35)}
.fdml-card-nav{
  margin:10px 0 16px;
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:10px;
  background:color-mix(in srgb, var(--muted) 10%, transparent);
}
.fdml-card-nav .sub{margin:0}
.fdml-card-nav a{margin-right:10px}
.timeline-figure{margin:10px 0 14px}
.timeline-figure-title{font-size:14px; margin:0 0 6px; color:var(--muted); font-weight:600}
.timeline-rail{
  display:flex;
  gap:4px;
  padding:8px;
  border:1px solid var(--border);
  border-radius:10px;
  background:color-mix(in srgb, var(--muted) 8%, transparent);
}
.timeline-seg{
  position:relative;
  min-width:18px;
  height:24px;
  border-radius:7px;
  border:1px solid color-mix(in srgb, var(--accent) 45%, var(--border));
  background:linear-gradient(180deg, color-mix(in srgb, var(--accent) 55%, transparent), color-mix(in srgb, var(--accent) 30%, transparent));
  overflow:hidden;
}
.timeline-seg-label{
  display:block;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-size:11px;
  line-height:22px;
  padding:0 6px;
  color:var(--accent-ink);
  mix-blend-mode:multiply;
}
.timeline-seg::after{
  content:attr(data-tip);
  position:absolute;
  left:50%;
  bottom:calc(100% + 8px);
  transform:translateX(-50%);
  background:var(--panel);
  color:var(--ink);
  border:1px solid var(--border);
  border-radius:8px;
  padding:4px 7px;
  font-size:11px;
  line-height:1.3;
  white-space:nowrap;
  box-shadow:var(--shadow);
  opacity:0;
  pointer-events:none;
  z-index:5;
}
.timeline-seg:hover::after{opacity:1}
.diagram-panel{
  margin:10px 0 16px;
  padding:10px;
  border:1px solid var(--border);
  border-radius:10px;
  background:color-mix(in srgb, var(--muted) 8%, transparent);
}
.diagram-panel h2{margin:0 0 8px}
.fdml-diagram-svg{
  width:100%;
  height:360px;
  display:block;
  border:1px solid var(--border);
  border-radius:8px;
  background:var(--panel);
}
.diagram-line{
  stroke:currentColor;
  opacity:.25;
  stroke-width:0.03;
  stroke-linecap:round;
}
.diagram-ring{
  fill:none !important;
  stroke:currentColor;
  opacity:.35;
  stroke-width:0.03;
}
.diagram-node{
  fill:currentColor;
  stroke:none;
}
.diagram-label{
  font-size:12px;
  text-anchor:middle;
  fill:currentColor;
  opacity:.9;
}
.diagram-label-small{font-size:11px}
.anim-controls{
  display:flex;
  align-items:center;
  gap:10px;
  margin:8px 0 16px;
  padding:10px;
  border:1px solid var(--border);
  border-radius:10px;
  background:color-mix(in srgb, var(--muted) 8%, transparent);
}
.anim-btn{
  border:1px solid var(--border);
  border-radius:8px;
  background:var(--panel);
  color:var(--ink);
  padding:6px 10px;
  font-weight:600;
  cursor:pointer;
}
.anim-btn:hover{filter:brightness(1.08)}
#fdml-scrub{flex:1; min-width:120px}
.anim-time{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; color:var(--muted); font-size:12px}
.table{width:100%; border-collapse:separate; border-spacing:0; margin-top:12px}
.table thead th{background:color-mix(in srgb, var(--muted) 12%, transparent); color:var(--ink); text-align:left; font-weight:600; padding:12px; border-bottom:1px solid var(--border)}
.table tbody td{padding:12px; border-bottom:1px solid var(--border)}
.chip{display:inline-block; background:color-mix(in srgb, var(--muted) 12%, transparent); color:var(--ink); border:1px solid var(--border); padding:2px 8px; border-radius:999px}
code{background:color-mix(in srgb, var(--muted) 14%, transparent); padding:.15rem .4rem; border-radius:6px}
a{color:var(--accent); text-underline-offset:2px}
a.muted{color:var(--muted)}
a:focus-visible{outline:none; box-shadow:var(--ring)}
footer{border-top:1px solid var(--border); margin-top:36px}
footer .container{padding:18px 24px}
@media (max-width:720px){ .container{margin:40px auto; padding:0 16px} .site-head .container{padding:12px 16px} .grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))} }
@media print{
  html, body{background:#fff !important; color:#000 !important}
  .site-head, footer, .fdml-card-nav{display:none !important}
  #fdml-timeline{display:none !important}
  #fdml-diagram{display:none !important}
  #fdml-anim-controls{display:none !important}
  .container{max-width:none; margin:0; padding:0}
  .hero, .card{
    background:#fff !important;
    color:#000 !important;
    border:1px solid #000 !important;
    box-shadow:none !important;
  }
  .card{
    page-break-inside:avoid;
    break-inside:avoid;
  }
  table, .table{
    width:100%;
    border-collapse:collapse !important;
    border-spacing:0 !important;
  }
  table th, table td, .table th, .table td{
    border:1px solid #222 !important;
    color:#000 !important;
    background:#fff !important;
  }
  a, a:visited{color:#000 !important; text-decoration:underline}
  code{
    color:#000 !important;
    background:#fff !important;
    border:1px solid #000;
  }
}
